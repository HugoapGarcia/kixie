{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["generateUrl","delay","Math","floor","random","getServerUrls","testUrl","url","a","console","log","Axios","get","timeout","HealthCheckerRefractored","urls","useState","listOfUrls","setListOfUrls","isCompleted","setIsCompleted","autoCheck","setAutoCheck","time","runTestUrl","index","onpress","map","v","i","btnOnPress","statusResponse","updated","value","test","textColor","window","clearTimeout","completed","length","then","res","push","setTimeout","useEffect","autoCheckOnSync","onClick","className","e","App","toggle","setToggle","src","width","height","frameBorder","allow","allowfullfcreen","title","viewBox","xmlns","fillRule","clipRule","d","fill","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2c384df7.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport Axios from \"axios\";\nimport \"./index.css\";\nimport { useEffect } from \"react/cjs/react.development\";\n\n\n\n/** Internal function to generate server links */\nfunction generateUrl() {\n  const delay = Math.floor(Math.random() * 3);\n  return `https://httpbin.org/delay/${delay}?delay=${delay}`;\n}\n/**\n * server links to test\n * @example\n *  ['https://httpbin.org/get', 'https://jsonplaceholder.typicode.com/todos/1', 'https://bad-url-abc-1234.gov']\n * @returns {string[]} Array of URLs\n */\nconst getServerUrls = () => [generateUrl(), generateUrl(), generateUrl()];\n/**\n * Function to test the url\n * @param {string} url URL to test\n * @returns {boolean} True if server alive and false if dead\n */\nasync function testUrl(url) {\n  try {\n    console.log(\"testing: \" + url);\n    await Axios.get(url, {\n      timeout: 1900\n    });\n    console.log(\"%cpass: \" + url, \"color: green\");\n    return true;\n  } catch (_exception) {\n    console.log(\"%cfail: \" + url, \"color: red\");\n    // console.log(exception);\n    return false;\n  }\n}\n\n/** Component that performs health check from getServerUrls() */\nfunction HealthCheckerRefractored({ urls }) {\n  //states\n  const [listOfUrls, setListOfUrls] = useState(urls);\n  const [isCompleted, setIsCompleted] = useState([]);\n  const [autoCheck, setAutoCheck] = useState(false);\n  //setTimer\n  let time = null;\n\n  useEffect(() => {\n    // autocheck will execute only if autcheck is true\n    if (autoCheck) autoCheckOnSync()\n    if (!autoCheck) { clearTimeout(time) };\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [autoCheck, isCompleted])\n\n  /**\n  * \n  * @param {*} url \n  * @param {*} index \n  * @returns boolean\n  * @description Run specific url to test and update the state to populate UI.\n  */\n  async function runTestUrl(url, index) {\n    let onpress = listOfUrls.map((v, i) => { if (i === index) v.btnOnPress = 'active'; return v })\n    setListOfUrls(onpress)\n\n    const statusResponse = await testUrl(url);\n\n    let updated = listOfUrls.map((value, i) => {\n      if (value.url === url && index === i) {\n        value.test = statusResponse ? 'pass' : 'fail';\n        value.textColor = statusResponse ? 'pass' : 'fail';\n        value.btnOnPress = '';\n        value.isCompleted = true\n      }\n      return value\n    })\n    setListOfUrls(updated);\n    //console.log(updated)\n    return updated[index].isCompleted ? 'completed' : 'untested'\n  }\n\n  /**\n* Fetch new generated urls and set to state.\n*/\n  function getResetNewUrls() {\n    setListOfUrls(getServerUrls().map((url) => { return { url: url, test: 'untested', textColor: '', btnOnPress: '' } }));\n  }\n\n  /**\n * \n * @returns array\n * @description Run auto check for all the url in the array syncronized with response\n * and set state for all submitions completed.\n */\n  async function autoCheckOnSync() {\n    window.clearTimeout(time);\n    if (!autoCheck) return;\n\n    //reset values to be test check \n    setListOfUrls(listOfUrls.map((url) => { return { url: url.url, test: 'untested', textColor: '', btnOnPress: '' } }));\n    let completed = [];\n\n    //console.log(autoCheck)\n\n    for (let i = 0; i < listOfUrls.length; i++) {\n      await runTestUrl(listOfUrls[i].url, i).then((res) => {\n        completed.push(res)\n      })\n    }\n\n\n    console.log('All test are done, syste will re-test every 5 seconds:', completed)\n    if (completed.length === listOfUrls.length) {\n\n      time = setTimeout(() => {\n        setIsCompleted(completed)\n      }, 5000)\n    }\n    return completed\n\n  }\n\n  return (\n    <div>\n      <h3>Health Checker Component</h3>\n      <button onClick={() => getResetNewUrls()}>Get New URLs</button>\n      <button className={autoCheck ? 'active' : ''} onClick={(e) => setAutoCheck(!autoCheck)}>Auto-check</button>\n      <ul>\n        {\n          listOfUrls.map((url, i) => {\n            return (\n              <li key={i}>\n                {`server ${i} :  ${url.url}`}\n                <button className={url.btnOnPress} onClick={(e) => runTestUrl(url.url, i)}>test</button>\n                <br />\n                <br />\n                <span className={url.textColor}>{url.test}</span>\n                <br />\n                <br />\n              </li>\n            )\n          })\n        }\n      </ul>\n    </div>\n  );\n}\n\n/** App component will render show button to start the health checker */\nexport default function App() {\n  /***state */\n  const [toggle, setToggle] = useState(false);\n\n  //set list of items array\n  const [listOfUrls] = useState(getServerUrls().map((url) => { return { url: url, test: 'untested', textColor: '', btnOnPress: '' } }));\n\n\n  return (\n    <div className=\"App\">\n      <h2>Server Health Check Page</h2>\n      <hr />\n      <button onClick={(e) => setToggle(!toggle)}>Show Health Checker</button>\n      {toggle\n        ?\n        <HealthCheckerRefractored urls={listOfUrls} />\n        : (false)}\n      <br />\n      <br />\n      <br />\n      <hr />\n      <h3>Requirements</h3>\n      <h4>Part 1:</h4>\n      Suppose we have an array of URLs that needs to be tested. You are asked to\n      build a reusable component that can display the list of URLs, their status\n      and show buttons that can be used to test the URLs.\n      <p>\n        A) Update the code so when the “Show Health Checker” button is pressed:\n      </p>\n      <ol>\n        <li>We show/hide the \"HealthChecker\" component</li>\n        <li>\n          Update \"HealthChecker\" component so it would call the getServerUrls()\n          function to get a list of URLS\n        </li>\n        <li>\n          Update the component to display each URL with its own test button\n          instead of the text \"LIST THE LINKS WITH TEST BUTTONS HERE\". Show the\n          \"untested\" status text underneath.\n        </li>\n      </ol>\n      B) Update your code so that when a Test button is pressed you would:\n      <ol>\n        <li>Call testUrl to perform the test for each URL</li>\n        <li>\n          Change the color of the button before calling testUrl to indicate it’s\n          being tested\n        </li>\n        <li>\n          Show the result underneath the URL as such:\n          <ul>\n            <li>If testUrl() returns true show \"pass\" in green.</li>\n            <li>If testUrl() returns false show \"fail\" in red.</li>\n          </ul>\n        </li>\n        <li>\n          Reset the color of the button back to indicate the test has ended\n        </li>\n      </ol>\n      <p>\n        <b>Recommendation:</b> Make the UI/layout as close as to what you see in\n        the video below.\n      </p>\n      <iframe\n        src=\"https://player.vimeo.com/video/556437590\"\n        width=\"640\"\n        height=\"478\"\n        frameBorder=\"0\"\n        allow=\"autoplay; fullscreen; picture-in-picture\"\n        allowfullfcreen={`true`}\n        title=\"Part1\"\n      ></iframe>\n      <h4>Part 2:</h4>\n      Add a \"Get new URLs\" Button that when pressed gets new set of Urls.\n      Replace the previous Urls with the new ones and reset the results\n      underneath each Url to “untested”.\n      <p>\n        <b>Note:</b> Since the URLs are dynamically generated please make sure\n        hitting Test button does not regenerate new URLs.\n      </p>\n      <h4>Part 3:</h4>\n      Suppose we want to continuously test the URLs to detect whether the server\n      is alive or dead.\n      <ol>\n        <li>\n          Add an \"Auto-check\" button that automatically tests each URL every 5\n          seconds.\n        </li>\n        <li>\n          The \"Auto-check\" button is a <b>TOGGLE</b> where re-pressing it will\n          stop the automatic testing of the URLs.\n        </li>\n        <li>\n          <b>Note:</b> Pressing the “Get New URLs” button during the automatic\n          tests should generate new URLs with status of untested. The new URLs\n          should be tested in the next 5 second round.\n        </li>\n      </ol>\n      <iframe\n        src=\"https://player.vimeo.com/video/556396090?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479\"\n        width=\"640\"\n        height=\"550\"\n        frameBorder=\"0\"\n        allow=\"autoplay; fullscreen; picture-in-picture\"\n        allowfullfcreen={`true`}\n        title=\"Part 2-3\"\n      ></iframe>\n      <h4>Extra Credit</h4>\n      <ul>\n        <li>\n          Clicking Auto-check will immediatly check the URLs and then wait 5\n          seconds before the next run\n        </li>\n        <li>\n          Clicking Auto-check will test ALL the URLs synchronously at the same\n          time\n        </li>\n      </ul>\n      <h3>CodeSandbox Auto Preview</h3>\n      <span>\n        By default CodeSandbox has Preview On Edit turned on. As such when you\n        are coding the Browser section of CodeSandbox will refresh automatically\n        and show errors. This behaviour can be turned off so that the browser is\n        only updated when you save a file. Follow steps below to turn off\n        Preview On Edit:\n        <ol>\n          <li>\n            Click on{\" \"}\n            <svg\n              viewBox=\"0 0 10 7\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              width=\"14\"\n              height=\"10\"\n              className=\"sc-bdnylx eoHNwX\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                clipRule=\"evenodd\"\n                d=\"M7.5 5.806H0v.944h7.5v-.944zm2.25-2.903H0v.944h9.75v-.944zM0 0h9.75v.944H0V0z\"\n                fill=\"currentColor\"\n              ></path>\n            </svg>{\" \"}\n            menu icon next to your name on top left hand side of this page\n          </li>\n          <li>Select File | Preferences | CodeSandbox Settings</li>\n          <li>Select Preview Tab</li>\n          <li>Turn off \"Preview on edit\"</li>\n        </ol>\n      </span>\n      <br />\n      <br />\n      <br />\n      <hr />\n    </div>\n  );\n}\n\n\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}